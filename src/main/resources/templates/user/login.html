<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <th:block th:replace="fragments/header::header"></th:block>
</head>

<body class="bg-gradient-primary">

<div class="container">

  <!-- Outer Row -->
  <div class="row justify-content-center">

    <div class="col-xl-10 col-lg-12 col-md-9">

      <div class="card o-hidden border-0 shadow-lg my-5">
        <div class="card-body p-0">
          <!-- Nested Row within Card Body -->
          <div class="row">
            <div class="col-lg-6 d-none d-lg-block bg-login-image"></div>
            <div class="col-lg-6">
              <div class="p-5">
                <div class="text-center">
                  <h1 class="h4 text-gray-900 mb-4">Debrain</h1>
                </div>
                <form class="user">
                  <a id="google" onclick="login(this)" class="btn btn-google btn-user btn-block">
                    <i class="fab fa-google fa-fw"></i> Login with Google
                  </a>
                  <a id="github" onclick="login(this)" class="btn btn-primary btn-user btn-block">
                    <i class="fab fa-github fa-fw"></i> Login with Github
                  </a>
                </form>
                <hr>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>

</div>

<th:block th:replace="fragments/script::script"></th:block>

<script>
    let origin = window.location.origin;

    function login(e) {
      const provider = e.id;
      let loginUrl = "https://api.debrain.co.kr/oauth2/authorization/" + provider + "?redirect_uri=" + origin + "/auth/redirect";

      if (provider === "google" && origin === "http://localhost:8080") {
        loginUrl = origin + "/oauth2/authorization/" + provider + "?redirect_uri=" + origin + "/auth/redirect"
      }

      window.location.href = loginUrl;
  }
</script>
</body>

</html>